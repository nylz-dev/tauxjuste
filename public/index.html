<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TauxJuste ‚Äî Calculateur de taux freelance</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #0a0a0a;
      --bg2: #111111;
      --bg3: #1a1a1a;
      --border: rgba(255,255,255,0.08);
      --border-hover: rgba(255,255,255,0.16);
      --text: #f0ede8;
      --text-muted: rgba(240,237,232,0.45);
      --text-dim: rgba(240,237,232,0.25);
      --accent: #d4a853;
      --accent-dim: rgba(212,168,83,0.15);
      --accent-hover: #e2be7a;
      --green: #4ade80;
      --red: #f87171;
    }

    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Grid texture */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(255,255,255,0.015) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.015) 1px, transparent 1px);
      background-size: 60px 60px;
      pointer-events: none;
      z-index: 0;
    }

    /* Ambient glow */
    body::after {
      content: '';
      position: fixed;
      top: -20%;
      left: 50%;
      transform: translateX(-50%);
      width: 600px;
      height: 600px;
      background: radial-gradient(ellipse, rgba(212,168,83,0.06) 0%, transparent 70%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 680px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
    nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 24px 0;
      border-bottom: 1px solid var(--border);
    }

    .logo {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--accent);
    }

    .nav-tag {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      color: var(--text-muted);
      letter-spacing: 0.08em;
      border: 1px solid var(--border);
      padding: 4px 10px;
      border-radius: 20px;
    }

    /* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
    .hero {
      padding: 80px 0 60px;
      text-align: center;
    }

    .hero-eyebrow {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 28px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .hero-eyebrow::before,
    .hero-eyebrow::after {
      content: '';
      display: inline-block;
      width: 24px;
      height: 1px;
      background: var(--accent);
      opacity: 0.5;
    }

    h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(38px, 6vw, 58px);
      font-weight: 900;
      line-height: 1.1;
      letter-spacing: -0.02em;
      color: var(--text);
      margin-bottom: 20px;
    }

    h1 em {
      font-style: italic;
      color: var(--accent);
    }

    .hero-sub {
      font-size: 16px;
      color: var(--text-muted);
      line-height: 1.7;
      max-width: 480px;
      margin: 0 auto 40px;
    }

    .hero-badges {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .badge {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      border: 1px solid var(--border);
      padding: 5px 12px;
      border-radius: 4px;
    }

    /* ‚îÄ‚îÄ WIZARD ‚îÄ‚îÄ */
    #wizard {
      padding-bottom: 80px;
    }

    /* Progress */
    .progress-bar {
      display: flex;
      gap: 6px;
      margin-bottom: 48px;
      padding-top: 8px;
    }

    .progress-step {
      flex: 1;
      height: 2px;
      background: var(--border);
      border-radius: 2px;
      transition: background 0.4s;
    }

    .progress-step.active { background: var(--accent); }
    .progress-step.done { background: rgba(212,168,83,0.35); }

    /* Step card */
    .step {
      display: none;
      animation: fadeUp 0.35s ease forwards;
    }
    .step.active { display: block; }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(16px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .step-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--text-dim);
      margin-bottom: 16px;
    }

    .step-question {
      font-family: 'Playfair Display', serif;
      font-size: clamp(22px, 4vw, 30px);
      font-weight: 700;
      line-height: 1.25;
      margin-bottom: 8px;
      color: var(--text);
    }

    .step-hint {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 32px;
      line-height: 1.6;
    }

    /* Options grid */
    .options {
      display: grid;
      gap: 10px;
    }

    .options.cols-2 { grid-template-columns: 1fr 1fr; }
    .options.cols-3 { grid-template-columns: 1fr 1fr 1fr; }

    .option {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 18px;
      border: 1px solid var(--border);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      background: transparent;
      color: var(--text);
      text-align: left;
      font-size: 14px;
      font-family: 'Inter', sans-serif;
      line-height: 1.4;
    }

    .option:hover {
      border-color: var(--border-hover);
      background: rgba(255,255,255,0.03);
    }

    .option.selected {
      border-color: var(--accent);
      background: var(--accent-dim);
      color: var(--text);
    }

    .option-icon { font-size: 18px; flex-shrink: 0; }

    .option-text strong {
      display: block;
      font-weight: 500;
      font-size: 14px;
    }

    .option-text span {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 2px;
      display: block;
    }

    /* Text input step */
    .text-input-wrap { position: relative; }

    .step-input {
      width: 100%;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px 20px;
      font-size: 15px;
      color: var(--text);
      font-family: 'Inter', sans-serif;
      outline: none;
      transition: border-color 0.2s;
      resize: none;
    }

    .step-input::placeholder { color: var(--text-dim); }

    .step-input:focus { border-color: var(--accent); }

    /* Navigation */
    .step-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 32px;
    }

    .btn-back {
      font-size: 13px;
      color: var(--text-muted);
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px 0;
      font-family: 'Inter', sans-serif;
      transition: color 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .btn-back:hover { color: var(--text); }

    .btn-next {
      background: var(--accent);
      color: #0a0a0a;
      border: none;
      border-radius: 6px;
      padding: 12px 28px;
      font-size: 14px;
      font-weight: 600;
      font-family: 'Inter', sans-serif;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-next:hover { background: var(--accent-hover); }
    .btn-next:disabled { opacity: 0.35; cursor: not-allowed; }

    /* Email gate */
    #email-gate {
      display: none;
      padding-bottom: 80px;
    }

    .email-gate-inner {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 48px;
      background: var(--bg2);
      text-align: center;
    }

    .gate-icon { font-size: 40px; margin-bottom: 20px; }

    .gate-title {
      font-family: 'Playfair Display', serif;
      font-size: 26px;
      font-weight: 700;
      margin-bottom: 12px;
    }

    .gate-sub {
      font-size: 15px;
      color: var(--text-muted);
      line-height: 1.6;
      max-width: 400px;
      margin: 0 auto 32px;
    }

    .gate-form { display: flex; flex-direction: column; gap: 12px; max-width: 360px; margin: 0 auto; }

    .gate-input {
      background: var(--bg3);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 14px 18px;
      font-size: 14px;
      color: var(--text);
      font-family: 'Inter', sans-serif;
      outline: none;
      transition: border-color 0.2s;
    }

    .gate-input::placeholder { color: var(--text-dim); }
    .gate-input:focus { border-color: var(--accent); }

    .btn-reveal {
      background: var(--accent);
      color: #0a0a0a;
      border: none;
      border-radius: 6px;
      padding: 14px;
      font-size: 14px;
      font-weight: 600;
      font-family: 'Inter', sans-serif;
      cursor: pointer;
      transition: background 0.2s;
    }

    .btn-reveal:hover { background: var(--accent-hover); }

    .gate-skip {
      margin-top: 12px;
      font-size: 12px;
      color: var(--text-dim);
      cursor: pointer;
      background: none;
      border: none;
      font-family: 'Inter', sans-serif;
      text-decoration: underline;
      text-underline-offset: 3px;
    }

    .gate-skip:hover { color: var(--text-muted); }

    /* ‚îÄ‚îÄ RESULTS ‚îÄ‚îÄ */
    #results {
      display: none;
      padding-bottom: 100px;
    }

    .results-header {
      text-align: center;
      padding: 48px 0 40px;
      border-bottom: 1px solid var(--border);
      margin-bottom: 40px;
    }

    .results-eyebrow {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 16px;
    }

    .results-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(26px, 4vw, 36px);
      font-weight: 700;
      margin-bottom: 8px;
    }

    .results-position {
      font-size: 14px;
      color: var(--text-muted);
    }

    /* Rate cards */
    .rate-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
      margin-bottom: 32px;
    }

    .rate-card {
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 24px 20px;
      background: var(--bg2);
      position: relative;
      overflow: hidden;
    }

    .rate-card.featured {
      border-color: var(--accent);
      background: linear-gradient(135deg, rgba(212,168,83,0.08), rgba(212,168,83,0.03));
    }

    .rate-card.featured::before {
      content: 'RECOMMAND√â';
      position: absolute;
      top: 0;
      right: 0;
      font-family: 'JetBrains Mono', monospace;
      font-size: 9px;
      letter-spacing: 0.1em;
      background: var(--accent);
      color: #0a0a0a;
      padding: 4px 8px;
      border-radius: 0 10px 0 6px;
    }

    .rate-type {
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-dim);
      margin-bottom: 12px;
    }

    .rate-value {
      font-family: 'Playfair Display', serif;
      font-size: 32px;
      font-weight: 900;
      color: var(--text);
      line-height: 1;
      margin-bottom: 4px;
    }

    .rate-card.featured .rate-value { color: var(--accent); }

    .rate-unit {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .rate-tjm {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      color: var(--text-muted);
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }

    .rate-tjm strong { color: var(--text); }

    .rate-context {
      font-size: 11px;
      color: var(--text-dim);
      margin-top: 8px;
      line-height: 1.4;
    }

    /* Projection */
    .projection {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px 20px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--bg2);
      margin-bottom: 32px;
    }

    .projection-icon {
      font-size: 20px;
      flex-shrink: 0;
    }

    .projection-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-dim);
      margin-bottom: 4px;
    }

    .projection-text {
      font-size: 14px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    /* Analysis blocks */
    .analysis-block {
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 28px;
      background: var(--bg2);
      margin-bottom: 16px;
    }

    .block-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .block-label::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--border);
    }

    .block-text {
      font-size: 14px;
      color: var(--text-muted);
      line-height: 1.7;
    }

    .list-items { display: flex; flex-direction: column; gap: 8px; }

    .list-item {
      display: flex;
      gap: 10px;
      font-size: 14px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .list-item-dot {
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: var(--accent);
      margin-top: 8px;
      flex-shrink: 0;
    }

    .list-item.warning .list-item-dot { background: #f59e0b; }

    /* N√©gociation */
    .nego-section {
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--bg2);
      overflow: hidden;
      margin-bottom: 16px;
    }

    .nego-header {
      padding: 24px 28px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 16px;
    }

    .nego-title {
      font-size: 15px;
      font-weight: 600;
    }

    .nego-sub {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .btn-unlock {
      background: transparent;
      border: 1px solid var(--accent);
      color: var(--accent);
      border-radius: 6px;
      padding: 9px 20px;
      font-size: 13px;
      font-weight: 600;
      font-family: 'Inter', sans-serif;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .btn-unlock:hover {
      background: var(--accent-dim);
    }

    .nego-body {
      padding: 28px;
      filter: blur(5px);
      user-select: none;
      pointer-events: none;
    }

    .nego-body.unlocked {
      filter: none;
      user-select: auto;
      pointer-events: auto;
    }

    .nego-block { margin-bottom: 24px; }

    .nego-block-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-dim);
      margin-bottom: 10px;
    }

    .nego-text {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.7;
      background: var(--bg3);
      border-radius: 6px;
      padding: 14px 16px;
      white-space: pre-wrap;
    }

    .btn-copy {
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-dim);
      background: none;
      border: none;
      cursor: pointer;
      font-family: 'JetBrains Mono', monospace;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      transition: color 0.2s;
    }

    .btn-copy:hover { color: var(--accent); }

    .nego-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }

    .nego-list { display: flex; flex-direction: column; gap: 6px; }
    .nego-list-item {
      display: flex;
      gap: 8px;
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.5;
    }
    .nego-list-item .dot-ok { color: var(--green); }
    .nego-list-item .dot-no { color: var(--red); }

    /* Reset */
    .results-footer {
      text-align: center;
      padding-top: 32px;
      border-top: 1px solid var(--border);
    }

    .btn-reset {
      font-size: 13px;
      color: var(--text-dim);
      background: none;
      border: none;
      cursor: pointer;
      font-family: 'Inter', sans-serif;
      text-decoration: underline;
      text-underline-offset: 3px;
    }

    .btn-reset:hover { color: var(--text-muted); }

    /* Loading */
    #loading {
      display: none;
      text-align: center;
      padding: 80px 0;
    }

    .loading-icon {
      font-size: 32px;
      animation: spin 2s linear infinite;
      display: block;
      margin: 0 auto 20px;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .loading-text {
      font-family: 'Playfair Display', serif;
      font-size: 20px;
      color: var(--text);
      margin-bottom: 8px;
    }

    .loading-sub {
      font-size: 13px;
      color: var(--text-dim);
    }

    /* Error */
    #error-msg {
      display: none;
      background: rgba(248,113,113,0.08);
      border: 1px solid rgba(248,113,113,0.2);
      color: #f87171;
      padding: 12px 16px;
      border-radius: 6px;
      font-size: 13px;
      margin-top: 16px;
      text-align: center;
    }

    /* Footer */
    footer {
      border-top: 1px solid var(--border);
      padding: 24px 0;
      text-align: center;
    }

    .footer-text {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.05em;
      color: var(--text-dim);
    }

    /* Responsive */
    @media (max-width: 580px) {
      .rate-grid { grid-template-columns: 1fr; }
      .options.cols-2 { grid-template-columns: 1fr; }
      .options.cols-3 { grid-template-columns: 1fr 1fr; }
      .nego-grid { grid-template-columns: 1fr; }
      .email-gate-inner { padding: 32px 20px; }
    }
  </style>
</head>
<body>

<div class="container">

  <nav>
    <span class="logo">TauxJuste</span>
    <span class="nav-tag">March√© FR ¬∑ 2025</span>
  </nav>

  <!-- HERO -->
  <section class="hero" id="hero">
    <div class="hero-eyebrow">Calculateur de taux freelance</div>
    <h1>Combien vaut<br/><em>vraiment</em> votre expertise ?</h1>
    <p class="hero-sub">Renseignez votre profil en 60 secondes. Obtenez votre fourchette de taux personnalis√©e, justifi√©e par les donn√©es r√©elles du march√© fran√ßais.</p>
    <div class="hero-badges">
      <span class="badge">Donn√©es Malt ¬∑ Comet ¬∑ 2025</span>
      <span class="badge">Personnalis√© par profil</span>
      <span class="badge">Gratuit</span>
    </div>
  </section>

  <!-- WIZARD -->
  <section id="wizard">
    <div class="progress-bar" id="progress-bar"></div>

    <!-- STEP 1 : Comp√©tence -->
    <div class="step active" data-step="1">
      <p class="step-label">01 / 06</p>
      <h2 class="step-question">Quelle est votre comp√©tence principale ?</h2>
      <p class="step-hint">Choisissez le domaine qui correspond le mieux √† votre activit√©.</p>
      <div class="options cols-2" id="opts-competence">
        <button class="option" data-value="D√©veloppeur web frontend"><span class="option-icon">‚ö°</span><div class="option-text"><strong>Dev Frontend</strong><span>React, Vue, Angular‚Ä¶</span></div></button>
        <button class="option" data-value="D√©veloppeur web backend"><span class="option-icon">‚öôÔ∏è</span><div class="option-text"><strong>Dev Backend</strong><span>Node, Python, PHP‚Ä¶</span></div></button>
        <button class="option" data-value="D√©veloppeur fullstack"><span class="option-icon">üîÅ</span><div class="option-text"><strong>Dev Fullstack</strong><span>Frontend + Backend</span></div></button>
        <button class="option" data-value="Dev data / ML / IA"><span class="option-icon">üß†</span><div class="option-text"><strong>Data / ML / IA</strong><span>Data science, LLM‚Ä¶</span></div></button>
        <button class="option" data-value="DevOps / Cloud"><span class="option-icon">‚òÅÔ∏è</span><div class="option-text"><strong>DevOps / Cloud</strong><span>AWS, GCP, Infra‚Ä¶</span></div></button>
        <button class="option" data-value="Designer UI/UX"><span class="option-icon">üé®</span><div class="option-text"><strong>Designer UI/UX</strong><span>Figma, produit‚Ä¶</span></div></button>
        <button class="option" data-value="Expert SEO / Growth"><span class="option-icon">üìà</span><div class="option-text"><strong>SEO / Growth</strong><span>Acquisition, analytics‚Ä¶</span></div></button>
        <button class="option" data-value="Product Manager"><span class="option-icon">üó∫Ô∏è</span><div class="option-text"><strong>Product Manager</strong><span>Roadmap, specs‚Ä¶</span></div></button>
        <button class="option" data-value="Consultant marketing digital"><span class="option-icon">üì£</span><div class="option-text"><strong>Marketing Digital</strong><span>Ads, social, email‚Ä¶</span></div></button>
        <button class="option" data-value="Consultant strat√©gie / management"><span class="option-icon">üíº</span><div class="option-text"><strong>Consulting / Mgmt</strong><span>Strat√©gie, organisation‚Ä¶</span></div></button>
        <button class="option" data-value="R√©dacteur / Copywriter"><span class="option-icon">‚úçÔ∏è</span><div class="option-text"><strong>R√©dacteur / Copy</strong><span>Contenu, UX writing‚Ä¶</span></div></button>
        <button class="option" data-value="Autre"><span class="option-icon">üîß</span><div class="option-text"><strong>Autre</strong><span>Autre sp√©cialit√©</span></div></button>
      </div>
      <div class="step-nav">
        <span></span>
        <button class="btn-next" id="next-1" disabled onclick="nextStep(1)">Continuer ‚Üí</button>
      </div>
    </div>

    <!-- STEP 2 : Exp√©rience -->
    <div class="step" data-step="2">
      <p class="step-label">02 / 06</p>
      <h2 class="step-question">Combien d'ann√©es d'exp√©rience avez-vous ?</h2>
      <p class="step-hint">En tant que freelance ou salari√©, toutes exp√©riences confondues dans votre domaine.</p>
      <div class="options cols-2" id="opts-experience">
        <button class="option" data-value="Moins d'1 an"><span class="option-icon">üå±</span><div class="option-text"><strong>Moins d'1 an</strong><span>D√©butant</span></div></button>
        <button class="option" data-value="1-2 ans"><span class="option-icon">üìö</span><div class="option-text"><strong>1 ‚Äì 2 ans</strong><span>Junior</span></div></button>
        <button class="option" data-value="3-5 ans"><span class="option-icon">üí™</span><div class="option-text"><strong>3 ‚Äì 5 ans</strong><span>Interm√©diaire</span></div></button>
        <button class="option" data-value="5-10 ans"><span class="option-icon">‚≠ê</span><div class="option-text"><strong>5 ‚Äì 10 ans</strong><span>Senior</span></div></button>
        <button class="option" data-value="Plus de 10 ans"><span class="option-icon">üèÜ</span><div class="option-text"><strong>10 ans et plus</strong><span>Expert / Lead</span></div></button>
      </div>
      <div class="step-nav">
        <button class="btn-back" onclick="prevStep(2)">‚Üê Retour</button>
        <button class="btn-next" id="next-2" disabled onclick="nextStep(2)">Continuer ‚Üí</button>
      </div>
    </div>

    <!-- STEP 3 : Localisation -->
    <div class="step" data-step="3">
      <p class="step-label">03 / 06</p>
      <h2 class="step-question">O√π √™tes-vous bas√© ?</h2>
      <p class="step-hint">Votre ville impacte directement les taux pratiqu√©s, m√™me en full remote.</p>
      <div class="options cols-2" id="opts-localisation">
        <button class="option" data-value="Paris / √éle-de-France"><span class="option-icon">üóº</span><div class="option-text"><strong>Paris / IDF</strong><span>+10 √† +20% vs moyenne</span></div></button>
        <button class="option" data-value="Lyon, Bordeaux, Nantes, Toulouse"><span class="option-icon">üèôÔ∏è</span><div class="option-text"><strong>Grande m√©tropole</strong><span>Lyon, Bordeaux, Nantes‚Ä¶</span></div></button>
        <button class="option" data-value="Ville moyenne / province"><span class="option-icon">üåø</span><div class="option-text"><strong>Ville moyenne</strong><span>-5 √† -10% vs moyenne</span></div></button>
        <button class="option" data-value="Full remote (client Paris)"><span class="option-icon">üåê</span><div class="option-text"><strong>Full remote</strong><span>Client Paris = taux Paris</span></div></button>
      </div>
      <div class="step-nav">
        <button class="btn-back" onclick="prevStep(3)">‚Üê Retour</button>
        <button class="btn-next" id="next-3" disabled onclick="nextStep(3)">Continuer ‚Üí</button>
      </div>
    </div>

    <!-- STEP 4 : Type de client -->
    <div class="step" data-step="4">
      <p class="step-label">04 / 06</p>
      <h2 class="step-question">Quel type de client visez-vous ?</h2>
      <p class="step-hint">Le type de client est l'un des facteurs les plus d√©terminants sur le taux applicable.</p>
      <div class="options" id="opts-typeClient">
        <button class="option" data-value="Startup early-stage"><span class="option-icon">üöÄ</span><div class="option-text"><strong>Startup early-stage</strong><span>Pr√©-seed / seed ‚Äî compenser par equity ou visibilit√©</span></div></button>
        <button class="option" data-value="Scale-up / Startup financ√©e"><span class="option-icon">üìä</span><div class="option-text"><strong>Scale-up / Startup financ√©e</strong><span>S√©rie A+ ‚Äî budgets tech solides</span></div></button>
        <button class="option" data-value="PME"><span class="option-icon">üè¢</span><div class="option-text"><strong>PME</strong><span>R√©f√©rence march√©</span></div></button>
        <button class="option" data-value="ETI / Grand groupe"><span class="option-icon">üè¶</span><div class="option-text"><strong>ETI / Grand groupe</strong><span>+10 √† +20% ‚Äî processus longs mais budgets √©lev√©s</span></div></button>
        <button class="option" data-value="Agence (sous-traitance)"><span class="option-icon">üîó</span><div class="option-text"><strong>Agence (sous-traitance)</strong><span>-5 √† -10% ‚Äî volume compens√© par r√©gularit√©</span></div></button>
      </div>
      <div class="step-nav">
        <button class="btn-back" onclick="prevStep(4)">‚Üê Retour</button>
        <button class="btn-next" id="next-4" disabled onclick="nextStep(4)">Continuer ‚Üí</button>
      </div>
    </div>

    <!-- STEP 5 : Portfolio -->
    <div class="step" data-step="5">
      <p class="step-label">05 / 06</p>
      <h2 class="step-question">Comment √©valuez-vous votre portfolio ?</h2>
      <p class="step-hint">Un portfolio fort justifie un taux premium aupr√®s des clients exigeants.</p>
      <div class="options" id="opts-qualitePortfolio">
        <button class="option" data-value="Portfolio en construction"><span class="option-icon">üå±</span><div class="option-text"><strong>En construction</strong><span>Peu de r√©f√©rences clients, premiers projets</span></div></button>
        <button class="option" data-value="Portfolio solide"><span class="option-icon">‚úÖ</span><div class="option-text"><strong>Portfolio solide</strong><span>R√©f√©rences vari√©es, r√©sultats d√©montrables</span></div></button>
        <button class="option" data-value="Portfolio fort (r√©f√©rences connues)"><span class="option-icon">‚≠ê</span><div class="option-text"><strong>Portfolio fort</strong><span>Clients reconnus, cas d'usage concrets</span></div></button>
        <button class="option" data-value="Portfolio d'excellence / prim√©"><span class="option-icon">üèÜ</span><div class="option-text"><strong>Portfolio d'excellence</strong><span>Prim√©, top clients, r√©sultats exceptionnels</span></div></button>
      </div>
      <div class="step-nav">
        <button class="btn-back" onclick="prevStep(5)">‚Üê Retour</button>
        <button class="btn-next" id="next-5" disabled onclick="nextStep(5)">Continuer ‚Üí</button>
      </div>
    </div>

    <!-- STEP 6 : Sp√©cialisation (optionnel) -->
    <div class="step" data-step="6">
      <p class="step-label">06 / 06</p>
      <h2 class="step-question">Avez-vous une sp√©cialisation ou des atouts sp√©cifiques ?</h2>
      <p class="step-hint">Optionnel ‚Äî mais plus vous √™tes pr√©cis, plus le r√©sultat sera personnalis√©.</p>
      <div class="text-input-wrap">
        <textarea class="step-input" id="specialisation" rows="3" placeholder="Ex : Expert React / Next.js pour SaaS B2B, certifi√© AWS, ex-Google, sp√©cialiste e-commerce Shopify, +40% conversion sur dernier projet‚Ä¶"></textarea>
      </div>
      <div id="error-msg"></div>
      <div class="step-nav">
        <button class="btn-back" onclick="prevStep(6)">‚Üê Retour</button>
        <button class="btn-next" id="next-6" onclick="submitForm()">Calculer mon taux ‚Üí</button>
      </div>
    </div>
  </section>

  <!-- EMAIL GATE -->
  <section id="email-gate">
    <div class="email-gate-inner">
      <div class="gate-icon">üìä</div>
      <h2 class="gate-title">Votre analyse est pr√™te</h2>
      <p class="gate-sub">Entrez votre email pour recevoir votre rapport personnalis√© ‚Äî taux recommand√©s, positionnement march√©, et conseils pour augmenter vos prix.</p>
      <div class="gate-form">
        <input type="email" class="gate-input" id="gate-email" placeholder="votre@email.com" />
        <button class="btn-reveal" onclick="revealResults()">Voir mon taux ‚Üí</button>
        <button class="gate-skip" onclick="skipGate()">Passer cette √©tape</button>
      </div>
    </div>
  </section>

  <!-- LOADING -->
  <section id="loading">
    <span class="loading-icon">‚öô</span>
    <p class="loading-text">Analyse en cours‚Ä¶</p>
    <p class="loading-sub">Comparaison avec les donn√©es march√© FR 2025</p>
  </section>

  <!-- RESULTS -->
  <section id="results">
    <div class="results-header">
      <p class="results-eyebrow">Analyse personnalis√©e</p>
      <h2 class="results-title" id="r-title">Votre taux recommand√©</h2>
      <p class="results-position" id="r-position">‚Äî</p>
    </div>

    <!-- Rate cards -->
    <div class="rate-grid">
      <div class="rate-card">
        <p class="rate-type">Taux comp√©titif</p>
        <p class="rate-value" id="r-bas-h">‚Äî</p>
        <p class="rate-unit">‚Ç¨ / heure</p>
        <div class="rate-tjm">TJM <strong id="r-bas-tjm">‚Äî</strong> ‚Ç¨/j</div>
        <p class="rate-context" id="r-quand-bas">‚Äî</p>
      </div>
      <div class="rate-card featured">
        <p class="rate-type">Taux cible</p>
        <p class="rate-value" id="r-cible-h">‚Äî</p>
        <p class="rate-unit">‚Ç¨ / heure</p>
        <div class="rate-tjm">TJM <strong id="r-cible-tjm">‚Äî</strong> ‚Ç¨/j</div>
        <p class="rate-context" id="r-justif">‚Äî</p>
      </div>
      <div class="rate-card">
        <p class="rate-type">Taux premium</p>
        <p class="rate-value" id="r-premium-h">‚Äî</p>
        <p class="rate-unit">‚Ç¨ / heure</p>
        <div class="rate-tjm">TJM <strong id="r-premium-tjm">‚Äî</strong> ‚Ç¨/j</div>
        <p class="rate-context" id="r-quand-premium">‚Äî</p>
      </div>
    </div>

    <!-- Projection -->
    <div class="projection">
      <span class="projection-icon">üìÖ</span>
      <div>
        <p class="projection-label">Projection mensuelle ¬∑ 15 jours factur√©s</p>
        <p class="projection-text" id="r-projection">‚Äî</p>
      </div>
    </div>

    <!-- Analyse -->
    <div class="analysis-block">
      <p class="block-label">Analyse de votre positionnement</p>
      <p class="block-text" id="r-resume">‚Äî</p>
    </div>

    <!-- Alertes + Conseils -->
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
      <div class="analysis-block">
        <p class="block-label">Points d'attention</p>
        <div class="list-items" id="r-alertes"></div>
      </div>
      <div class="analysis-block">
        <p class="block-label">Pour monter en gamme</p>
        <div class="list-items" id="r-conseils"></div>
      </div>
    </div>

    <!-- N√©gociation -->
    <div class="nego-section">
      <div class="nego-header">
        <div>
          <p class="nego-title">Scripts de n√©gociation</p>
          <p class="nego-sub">Email ¬∑ Appel ¬∑ R√©ponses aux objections ‚Äî pr√™ts √† l'emploi</p>
        </div>
        <div id="nego-gate">
          <button class="btn-unlock" onclick="unlockNego()">D√©bloquer ‚Äî gratuit</button>
        </div>
        <div id="nego-unlocked" style="display:none">
          <span style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--green);letter-spacing:0.05em;">‚úì D√âBLOQU√â</span>
        </div>
      </div>
      <div class="nego-body" id="nego-body">
        <div class="nego-block">
          <p class="nego-block-label">üìß Email de proposition tarifaire</p>
          <div class="nego-text" id="n-email">‚Äî</div>
          <button class="btn-copy" onclick="copyText('n-email')">[ copier ]</button>
        </div>
        <div class="nego-block">
          <p class="nego-block-label">üìû Pitch pour appel</p>
          <div class="nego-text" id="n-call">‚Äî</div>
          <button class="btn-copy" onclick="copyText('n-call')">[ copier ]</button>
        </div>
        <div class="nego-grid">
          <div>
            <p class="nego-block-label">üí¨ "C'est trop cher"</p>
            <div class="nego-text" id="n-tropcher">‚Äî</div>
          </div>
          <div>
            <p class="nego-block-label">üí¨ "Vous faites une remise ?"</p>
            <div class="nego-text" id="n-remise">‚Äî</div>
          </div>
        </div>
        <div class="nego-grid">
          <div>
            <p class="nego-block-label">‚úì Arguments √† mettre en avant</p>
            <div class="nego-list" id="n-points"></div>
          </div>
          <div>
            <p class="nego-block-label">‚úï Erreurs √† √©viter</p>
            <div class="nego-list" id="n-erreurs"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="results-footer">
      <button class="btn-reset" onclick="resetAll()">‚Üê Recalculer avec un autre profil</button>
    </div>
  </section>

  <footer>
    <p class="footer-text">TauxJuste ¬∑ Donn√©es march√© France 2025 ¬∑ Calcul personnalis√©</p>
  </footer>

</div>

<script>
  // ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
  const answers = {};
  let currentStep = 1;
  const TOTAL_STEPS = 6;
  let calcData = null;
  let negoUnlocked = false;
  let emailCollected = false;

  // ‚îÄ‚îÄ PROGRESS ‚îÄ‚îÄ
  function renderProgress() {
    const bar = document.getElementById('progress-bar');
    bar.innerHTML = '';
    for (let i = 1; i <= TOTAL_STEPS; i++) {
      const el = document.createElement('div');
      el.className = 'progress-step' + (i < currentStep ? ' done' : i === currentStep ? ' active' : '');
      bar.appendChild(el);
    }
  }

  renderProgress();

  // ‚îÄ‚îÄ OPTION SELECTION ‚îÄ‚îÄ
  document.querySelectorAll('.options').forEach(group => {
    group.querySelectorAll('.option').forEach(btn => {
      btn.addEventListener('click', () => {
        group.querySelectorAll('.option').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        const stepEl = btn.closest('.step');
        const stepNum = +stepEl.dataset.step;
        const nextBtn = document.getElementById('next-' + stepNum);
        if (nextBtn) nextBtn.disabled = false;
      });
    });
  });

  // ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ
  function nextStep(from) {
    // Collect answer
    const group = document.getElementById('opts-' + getFieldName(from));
    if (group) {
      const sel = group.querySelector('.option.selected');
      if (sel) answers[getFieldName(from)] = sel.dataset.value;
    }

    if (from < TOTAL_STEPS) {
      document.querySelector('.step[data-step="' + from + '"]').classList.remove('active');
      currentStep = from + 1;
      document.querySelector('.step[data-step="' + currentStep + '"]').classList.add('active');
      renderProgress();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  }

  function prevStep(current) {
    document.querySelector('.step[data-step="' + current + '"]').classList.remove('active');
    currentStep = current - 1;
    document.querySelector('.step[data-step="' + currentStep + '"]').classList.add('active');
    renderProgress();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function getFieldName(step) {
    return ['competence','experience','localisation','typeClient','qualitePortfolio'][step-1];
  }

  // ‚îÄ‚îÄ SUBMIT ‚îÄ‚îÄ
  async function submitForm() {
    answers.specialisation = document.getElementById('specialisation').value;
    showSection('email-gate');
  }

  // ‚îÄ‚îÄ EMAIL GATE ‚îÄ‚îÄ
  function revealResults() {
    const email = document.getElementById('gate-email').value.trim();
    if (!email || !email.includes('@')) {
      document.getElementById('gate-email').focus();
      document.getElementById('gate-email').style.borderColor = 'var(--red)';
      return;
    }
    emailCollected = true;
    loadResults();
  }

  function skipGate() {
    loadResults();
  }

  async function loadResults() {
    showSection('loading');
    try {
      const payload = {
        competence: answers.competence || '',
        experience: answers.experience || '',
        localisation: answers.localisation || 'France',
        arrangement: 'Non pr√©cis√©',
        specialisation: answers.specialisation || '',
        typeProjet: 'Non pr√©cis√©',
        complexite: 'Standard',
        typeClient: answers.typeClient || 'PME',
        duree: 'Non pr√©cis√©',
        descriptionProjet: '',
        qualitePortfolio: answers.qualitePortfolio || 'Portfolio solide',
        niveauDemande: 'Quelques leads en cours',
        valeurUnique: answers.specialisation || ''
      };

      const res = await fetch('/api/calculate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      const data = await res.json();
      if (!res.ok) throw new Error(data.error || 'Erreur inconnue');
      calcData = { ...payload, tauxCible: data.tauxHoraire?.cible };
      displayResults(data);
    } catch(err) {
      showSection('wizard');
      currentStep = 6;
      document.querySelector('.step[data-step="6"]').classList.add('active');
      document.getElementById('error-msg').textContent = '‚ùå ' + err.message;
      document.getElementById('error-msg').style.display = 'block';
    }
  }

  function displayResults(data) {
    // Rates
    document.getElementById('r-bas-h').textContent = data.tauxHoraire?.bas + '‚Ç¨';
    document.getElementById('r-bas-tjm').textContent = data.tjm?.bas;
    document.getElementById('r-cible-h').textContent = data.tauxHoraire?.cible + '‚Ç¨';
    document.getElementById('r-cible-tjm').textContent = data.tjm?.cible;
    document.getElementById('r-premium-h').textContent = data.tauxHoraire?.premium + '‚Ç¨';
    document.getElementById('r-premium-tjm').textContent = data.tjm?.premium;

    document.getElementById('r-justif').textContent = data.justificationCible || '';
    document.getElementById('r-quand-bas').textContent = data.quandUtiliserBas || '';
    document.getElementById('r-quand-premium').textContent = data.quandUtiliserPremium || '';
    document.getElementById('r-position').textContent = data.positionMarche || '';
    document.getElementById('r-resume').textContent = data.resumePositionnement || '';
    document.getElementById('r-projection').textContent = data.projectionMensuelle || '';

    document.getElementById('r-title').textContent = `${answers.competence || 'Freelance'} ¬∑ ${answers.experience || ''}`;

    // Alertes
    const alertes = data.alertes || [];
    document.getElementById('r-alertes').innerHTML = alertes.length
      ? alertes.map(a => `<div class="list-item warning"><div class="list-item-dot"></div><span>${a}</span></div>`).join('')
      : '<p style="font-size:13px;color:var(--text-dim)">Aucune alerte.</p>';

    // Conseils
    const conseils = data.conseils || [];
    document.getElementById('r-conseils').innerHTML = conseils.length
      ? conseils.map(c => `<div class="list-item"><div class="list-item-dot"></div><span>${c}</span></div>`).join('')
      : '<p style="font-size:13px;color:var(--text-dim)">Continuez comme √ßa.</p>';

    showSection('results');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // ‚îÄ‚îÄ N√âGOCIATION ‚îÄ‚îÄ
  async function unlockNego() {
    if (negoUnlocked || !calcData) return;
    document.getElementById('nego-gate').innerHTML = '<span style="font-family:\'JetBrains Mono\',monospace;font-size:11px;color:var(--text-dim);letter-spacing:0.05em;">G√âN√âRATION‚Ä¶</span>';

    try {
      const res = await fetch('/api/negotiate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(calcData)
      });
      const data = await res.json();
      if (!res.ok) throw new Error(data.error);

      document.getElementById('n-email').textContent = data.scriptEmail || '‚Äî';
      document.getElementById('n-call').textContent = data.scriptCall || '‚Äî';
      document.getElementById('n-tropcher').textContent = data.reponseTropCher || '‚Äî';
      document.getElementById('n-remise').textContent = data.reponseRemise || '‚Äî';

      document.getElementById('n-points').innerHTML = (data.pointsForts || [])
        .map(p => `<div class="nego-list-item"><span class="dot-ok">‚úì</span><span>${p}</span></div>`).join('');
      document.getElementById('n-erreurs').innerHTML = (data.erreursCourantes || [])
        .map(e => `<div class="nego-list-item"><span class="dot-no">‚úï</span><span>${e}</span></div>`).join('');

      document.getElementById('nego-body').classList.add('unlocked');
      document.getElementById('nego-gate').style.display = 'none';
      document.getElementById('nego-unlocked').style.display = 'block';
      negoUnlocked = true;

    } catch(err) {
      document.getElementById('nego-gate').innerHTML = `
        <span style="color:var(--red);font-size:12px;">${err.message}</span>
        <button class="btn-unlock" onclick="unlockNego()" style="margin-left:12px;">R√©essayer</button>
      `;
    }
  }

  // ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ
  function showSection(id) {
    ['hero','wizard','email-gate','loading','results'].forEach(s => {
      document.getElementById(s).style.display = 'none';
    });
    document.getElementById('progress-bar').style.display = id === 'wizard' ? 'flex' : 'none';
    document.getElementById(id).style.display = 'block';
    if (id === 'wizard') document.getElementById('progress-bar').style.display = 'flex';
  }

  // Show hero + wizard initially
  document.getElementById('hero').style.display = 'block';
  document.getElementById('wizard').style.display = 'block';
  document.getElementById('progress-bar').style.display = 'flex';
  document.getElementById('email-gate').style.display = 'none';
  document.getElementById('loading').style.display = 'none';
  document.getElementById('results').style.display = 'none';

  function resetAll() {
    Object.keys(answers).forEach(k => delete answers[k]);
    currentStep = 1;
    negoUnlocked = false;
    emailCollected = false;

    document.querySelectorAll('.option').forEach(b => b.classList.remove('selected'));
    document.querySelectorAll('.btn-next').forEach(b => { if (b.id !== 'next-6') b.disabled = true; });
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    document.querySelector('.step[data-step="1"]').classList.add('active');
    document.getElementById('specialisation').value = '';
    document.getElementById('error-msg').style.display = 'none';
    document.getElementById('nego-body').classList.remove('unlocked');
    document.getElementById('nego-gate').style.display = 'block';
    document.getElementById('nego-gate').innerHTML = '<button class="btn-unlock" onclick="unlockNego()">D√©bloquer ‚Äî gratuit</button>';
    document.getElementById('nego-unlocked').style.display = 'none';

    document.getElementById('hero').style.display = 'block';
    document.getElementById('wizard').style.display = 'block';
    document.getElementById('progress-bar').style.display = 'flex';
    document.getElementById('email-gate').style.display = 'none';
    document.getElementById('loading').style.display = 'none';
    document.getElementById('results').style.display = 'none';

    renderProgress();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function copyText(id) {
    const text = document.getElementById(id).textContent;
    navigator.clipboard.writeText(text).then(() => {
      const btns = document.querySelectorAll('.btn-copy');
      btns.forEach(b => {
        if (b.getAttribute('onclick') === `copyText('${id}')`) {
          b.textContent = '[ copi√© ‚úì ]';
          setTimeout(() => b.textContent = '[ copier ]', 2000);
        }
      });
    });
  }
</script>
</body>
</html>
