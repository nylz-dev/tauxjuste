<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TauxJuste ‚Äî Calculateur de taux freelance IA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    * { font-family: 'Inter', sans-serif; }
    .gradient-bg { background: linear-gradient(135deg, #0f172a 0%, #1e3a5f 100%); }
    .card-hover { transition: transform 0.2s, box-shadow 0.2s; }
    .card-hover:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(0,0,0,0.12); }
    .rate-card { background: linear-gradient(135deg, #f0fdf4, #dcfce7); border: 2px solid #86efac; }
    .rate-card-target { background: linear-gradient(135deg, #052e16, #14532d); border: 2px solid #22c55e; }
    .rate-card-premium { background: linear-gradient(135deg, #fefce8, #fef9c3); border: 2px solid #fbbf24; }
    .locked { filter: blur(4px); user-select: none; pointer-events: none; }
    .badge { display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 20px; font-size: 12px; font-weight: 600; }
    .pulse { animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
    .fade-in { animation: fadeIn 0.4s ease-in; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    select, input, textarea {
      background: white;
      border: 1.5px solid #e2e8f0;
      border-radius: 8px;
      padding: 10px 14px;
      width: 100%;
      font-size: 14px;
      transition: border-color 0.2s;
      outline: none;
    }
    select:focus, input:focus, textarea:focus { border-color: #22c55e; box-shadow: 0 0 0 3px rgba(34,197,94,0.1); }
    label { font-size: 13px; font-weight: 600; color: #374151; display: block; margin-bottom: 6px; }
    .section-title { font-size: 11px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; color: #6b7280; margin-bottom: 16px; }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">

  <!-- HEADER -->
  <header class="gradient-bg text-white py-12 px-4">
    <div class="max-w-4xl mx-auto text-center">
      <div class="inline-flex items-center gap-2 bg-green-500 bg-opacity-20 border border-green-400 border-opacity-30 rounded-full px-4 py-1.5 text-sm text-green-300 font-medium mb-6">
        üíº Calculateur IA ¬∑ March√© fran√ßais
      </div>
      <h1 class="text-4xl md:text-5xl font-bold mb-4 leading-tight">
        Combien vaut<br/><span class="text-green-400">vraiment</span> votre expertise ?
      </h1>
      <p class="text-lg text-slate-300 max-w-xl mx-auto leading-relaxed">
        Fini les devis au feeling. TauxJuste analyse votre profil et le march√© FR pour vous donner un taux juste, justifi√© et d√©fendable.
      </p>
      <div class="flex flex-wrap justify-center gap-4 mt-8 text-sm text-slate-400">
        <span>‚úì Bas√© sur Malt, Comet, Cr√®me de la Cr√®me</span>
        <span>‚úì Donn√©es 2024 march√© FR</span>
        <span>‚úì Calcul gratuit</span>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="max-w-4xl mx-auto px-4 py-10">

    <!-- FORM -->
    <div id="form-section" class="bg-white rounded-2xl shadow-sm border border-gray-100 p-8 mb-6">
      <h2 class="text-xl font-bold text-gray-900 mb-8">Votre profil freelance</h2>

      <!-- Section 1 : Profil -->
      <div class="mb-10">
        <p class="section-title">1 ¬∑ Qui √™tes-vous ?</p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
          <div>
            <label>Comp√©tence principale *</label>
            <select id="competence">
              <option value="">‚Äî Choisir ‚Äî</option>
              <optgroup label="Tech & Dev">
                <option>D√©veloppeur web frontend</option>
                <option>D√©veloppeur web backend</option>
                <option>D√©veloppeur fullstack</option>
                <option>D√©veloppeur mobile</option>
                <option>Dev data / Data engineer</option>
                <option>ML / IA engineer</option>
                <option>DevOps / Cloud</option>
                <option>Architecte logiciel</option>
              </optgroup>
              <optgroup label="Design">
                <option>Designer UI/UX</option>
                <option>Directeur artistique</option>
                <option>Motion designer</option>
                <option>Graphiste</option>
              </optgroup>
              <optgroup label="Marketing & Contenu">
                <option>R√©dacteur / Copywriter</option>
                <option>Expert SEO</option>
                <option>Social media manager</option>
                <option>Growth hacker</option>
                <option>Consultant marketing digital</option>
              </optgroup>
              <optgroup label="Consulting">
                <option>Chef de projet digital</option>
                <option>Product Manager</option>
                <option>Consultant RH</option>
                <option>Consultant financier</option>
                <option>Consultant strat√©gie</option>
                <option>Formateur</option>
              </optgroup>
              <option value="Autre">Autre</option>
            </select>
          </div>

          <div>
            <label>Ann√©es d'exp√©rience *</label>
            <select id="experience">
              <option value="">‚Äî Choisir ‚Äî</option>
              <option>Moins d'1 an</option>
              <option>1-2 ans</option>
              <option>3-5 ans</option>
              <option>5-10 ans</option>
              <option>Plus de 10 ans</option>
            </select>
          </div>

          <div>
            <label>Localisation</label>
            <input type="text" id="localisation" placeholder="Ex : Paris, Lyon, Remote..." />
          </div>

          <div>
            <label>Mode de travail</label>
            <select id="arrangement">
              <option value="Full remote">Full remote</option>
              <option value="Hybride">Hybride</option>
              <option value="Sur site requis">Sur site requis</option>
            </select>
          </div>

          <div class="md:col-span-2">
            <label>Votre sp√©cialisation <span class="font-normal text-gray-400">(ce qui vous rend unique)</span></label>
            <textarea id="specialisation" rows="2" placeholder="Ex : React/Next.js pour startups SaaS, sp√©cialiste e-commerce Shopify, copywriting B2B SaaS..."></textarea>
          </div>
        </div>
      </div>

      <!-- Section 2 : La mission -->
      <div class="mb-10">
        <p class="section-title">2 ¬∑ La mission</p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
          <div>
            <label>Type de mission</label>
            <select id="typeProjet">
              <option value="Mission ponctuelle">Mission ponctuelle</option>
              <option value="Retainer mensuel">Retainer mensuel</option>
              <option value="Forfait projet">Forfait projet</option>
              <option value="TJM (r√©gie)">TJM / R√©gie</option>
            </select>
          </div>

          <div>
            <label>Complexit√©</label>
            <select id="complexite">
              <option value="Standard">Standard</option>
              <option value="Interm√©diaire">Interm√©diaire</option>
              <option value="Complexe / Sp√©cialis√©">Complexe / Sp√©cialis√©</option>
            </select>
          </div>

          <div>
            <label>Type de client</label>
            <select id="typeClient">
              <option value="Startup early-stage">Startup early-stage</option>
              <option value="Scale-up / Startup financ√©e">Scale-up / Startup financ√©e</option>
              <option value="PME">PME</option>
              <option value="ETI">ETI</option>
              <option value="Grand groupe">Grand groupe</option>
              <option value="Agence (sous-traitance)">Agence (sous-traitance)</option>
            </select>
          </div>

          <div>
            <label>Dur√©e estim√©e</label>
            <select id="duree">
              <option value="Moins d'1 semaine">Moins d'1 semaine</option>
              <option value="1-4 semaines">1-4 semaines</option>
              <option value="1-3 mois">1-3 mois</option>
              <option value="3-6 mois">3-6 mois</option>
              <option value="6+ mois">6+ mois</option>
            </select>
          </div>

          <div class="md:col-span-2">
            <label>Description de la mission <span class="font-normal text-gray-400">(optionnel)</span></label>
            <textarea id="descriptionProjet" rows="2" placeholder="Ex : Refonte compl√®te d'une webapp React, migration vers TypeScript, int√©gration d'une API de paiement..."></textarea>
          </div>
        </div>
      </div>

      <!-- Section 3 : Positionnement -->
      <div class="mb-8">
        <p class="section-title">3 ¬∑ Votre positionnement</p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
          <div>
            <label>Qualit√© du portfolio</label>
            <select id="qualitePortfolio">
              <option value="Portfolio en construction">Portfolio en construction</option>
              <option value="Portfolio solide">Portfolio solide</option>
              <option value="Portfolio fort (r√©f√©rences connues)">Portfolio fort (r√©f√©rences connues)</option>
              <option value="Portfolio d'excellence / prim√©">Portfolio d'excellence / prim√©</option>
            </select>
          </div>

          <div>
            <label>Niveau de demande actuel</label>
            <select id="niveauDemande">
              <option value="Je cherche activement des missions">Je cherche activement</option>
              <option value="Quelques leads en cours">Quelques leads en cours</option>
              <option value="Pipeline r√©gulier">Pipeline r√©gulier</option>
              <option value="Forte demande, je refuse des clients">Forte demande</option>
            </select>
          </div>

          <div class="md:col-span-2">
            <label>Atouts sp√©cifiques <span class="font-normal text-gray-400">(certifications, r√©sultats chiffr√©s, clients notables...)</span></label>
            <textarea id="valeurUnique" rows="2" placeholder="Ex : Certifi√© AWS, ex-Google, j'ai augment√© le taux de conversion de 40% chez un client e-commerce..."></textarea>
          </div>
        </div>
      </div>

      <!-- SUBMIT -->
      <button
        id="calculate-btn"
        onclick="calculateRate()"
        class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-8 rounded-xl text-lg transition-all duration-200 shadow-lg hover:shadow-xl"
      >
        üí° Calculer mon taux juste ‚Üí
      </button>

      <p id="error-msg" class="hidden mt-4 text-red-500 text-sm text-center bg-red-50 py-2 px-4 rounded-lg"></p>
    </div>

    <!-- RESULTS -->
    <div id="results-section" class="hidden fade-in">

      <!-- RATE CARDS -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <!-- BAS -->
        <div class="rate-card rounded-2xl p-6 card-hover">
          <p class="text-xs font-bold uppercase tracking-wider text-green-700 mb-2">Taux comp√©titif</p>
          <p class="text-3xl font-black text-green-800" id="r-bas-h">‚Äî</p>
          <p class="text-sm text-green-700 mb-1">‚Ç¨ / heure</p>
          <p class="text-2xl font-bold text-green-700" id="r-bas-tjm">‚Äî</p>
          <p class="text-xs text-green-600">TJM (8h)</p>
          <p class="text-xs text-gray-500 mt-3" id="r-quand-bas">‚Äî</p>
        </div>

        <!-- CIBLE -->
        <div class="rate-card-target rounded-2xl p-6 card-hover relative">
          <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
            <span class="badge bg-green-500 text-white">‚≠ê Recommand√©</span>
          </div>
          <p class="text-xs font-bold uppercase tracking-wider text-green-300 mb-2">Taux cible</p>
          <p class="text-3xl font-black text-white" id="r-cible-h">‚Äî</p>
          <p class="text-sm text-green-300 mb-1">‚Ç¨ / heure</p>
          <p class="text-2xl font-bold text-green-400" id="r-cible-tjm">‚Äî</p>
          <p class="text-xs text-green-300">TJM (8h)</p>
          <p class="text-xs text-gray-400 mt-3" id="r-justif">‚Äî</p>
        </div>

        <!-- PREMIUM -->
        <div class="rate-card-premium rounded-2xl p-6 card-hover">
          <p class="text-xs font-bold uppercase tracking-wider text-yellow-700 mb-2">Taux premium</p>
          <p class="text-3xl font-black text-yellow-800" id="r-premium-h">‚Äî</p>
          <p class="text-sm text-yellow-700 mb-1">‚Ç¨ / heure</p>
          <p class="text-2xl font-bold text-yellow-700" id="r-premium-tjm">‚Äî</p>
          <p class="text-xs text-yellow-600">TJM (8h)</p>
          <p class="text-xs text-gray-500 mt-3" id="r-quand-premium">‚Äî</p>
        </div>
      </div>

      <!-- POSITION MARCH√â + R√âSUM√â -->
      <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
        <div class="flex items-center gap-3 mb-4">
          <div class="bg-green-100 rounded-full p-2">üìä</div>
          <div>
            <p class="font-bold text-gray-900">Votre position sur le march√©</p>
            <p class="text-sm text-green-600 font-semibold" id="r-position">‚Äî</p>
          </div>
        </div>
        <p class="text-sm text-gray-700 leading-relaxed" id="r-resume">‚Äî</p>

        <!-- Projection -->
        <div class="mt-4 bg-green-50 rounded-xl p-4">
          <p class="text-xs font-bold uppercase tracking-wider text-green-700 mb-1">Projection mensuelle (15 jours factur√©s)</p>
          <p class="text-sm text-green-800" id="r-projection">‚Äî</p>
        </div>
      </div>

      <!-- ALERTES + CONSEILS -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
          <h3 class="font-bold text-gray-900 mb-4">‚ö° Points d'attention</h3>
          <ul id="r-alertes" class="space-y-2 text-sm text-gray-700"></ul>
        </div>
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
          <h3 class="font-bold text-gray-900 mb-4">üí° Conseils pour monter en gamme</h3>
          <ul id="r-conseils" class="space-y-2 text-sm text-gray-700"></ul>
        </div>
      </div>

      <!-- SECTION N√âGOCIATION (premium) -->
      <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-6">
        <div class="p-6 border-b border-gray-100">
          <div class="flex items-center justify-between flex-wrap gap-4">
            <div>
              <h3 class="font-bold text-gray-900 text-lg">ü§ù Scripts de n√©gociation</h3>
              <p class="text-sm text-gray-500 mt-1">D√©fendez votre taux avec les bons mots ‚Äî email, call, objections</p>
            </div>
            <div id="premium-gate" class="flex items-center gap-3">
              <span class="badge bg-amber-100 text-amber-700">üîí Premium</span>
              <button onclick="unlockNegotiation()" class="bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-5 rounded-xl text-sm transition-colors">
                D√©bloquer ‚Äî 3‚Ç¨
              </button>
            </div>
            <div id="premium-unlocked" class="hidden">
              <span class="badge bg-green-100 text-green-700">‚úì D√©bloqu√©</span>
            </div>
          </div>
        </div>

        <div id="negotiate-content" class="p-6 space-y-5">
          <!-- Email -->
          <div>
            <p class="text-xs font-bold uppercase tracking-wider text-gray-500 mb-2">üìß Email de proposition tarifaire</p>
            <div class="bg-gray-50 rounded-xl p-4 text-sm text-gray-700 leading-relaxed whitespace-pre-wrap" id="n-email">‚Äî</div>
            <button onclick="copyText('n-email')" class="mt-2 text-xs text-green-600 font-medium hover:underline">Copier</button>
          </div>
          <!-- Call -->
          <div>
            <p class="text-xs font-bold uppercase tracking-wider text-gray-500 mb-2">üìû Pitch pour un appel</p>
            <div class="bg-gray-50 rounded-xl p-4 text-sm text-gray-700 leading-relaxed" id="n-call">‚Äî</div>
            <button onclick="copyText('n-call')" class="mt-2 text-xs text-green-600 font-medium hover:underline">Copier</button>
          </div>
          <!-- Objections -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <p class="text-xs font-bold uppercase tracking-wider text-gray-500 mb-2">üí¨ "C'est trop cher"</p>
              <div class="bg-red-50 rounded-xl p-4 text-sm text-gray-700 leading-relaxed" id="n-tropcher">‚Äî</div>
            </div>
            <div>
              <p class="text-xs font-bold uppercase tracking-wider text-gray-500 mb-2">üí¨ "Vous faites une remise ?"</p>
              <div class="bg-orange-50 rounded-xl p-4 text-sm text-gray-700 leading-relaxed" id="n-remise">‚Äî</div>
            </div>
          </div>
          <!-- Points forts -->
          <div>
            <p class="text-xs font-bold uppercase tracking-wider text-gray-500 mb-2">üèÜ Arguments √† mettre en avant</p>
            <ul id="n-points" class="space-y-2"></ul>
          </div>
          <!-- Erreurs -->
          <div>
            <p class="text-xs font-bold uppercase tracking-wider text-gray-500 mb-2">‚ùå Erreurs √† √©viter</p>
            <ul id="n-erreurs" class="space-y-2"></ul>
          </div>
        </div>
      </div>

      <!-- RECALCUL -->
      <div class="text-center">
        <button onclick="resetForm()" class="text-gray-500 hover:text-gray-700 text-sm font-medium underline">
          ‚Üê Recalculer avec un autre profil
        </button>
      </div>
    </div>

    <!-- LOADING -->
    <div id="loading-section" class="hidden text-center py-16">
      <div class="text-5xl mb-4 pulse">üíº</div>
      <p class="text-gray-600 font-medium text-lg">Analyse du march√© en cours...</p>
      <p class="text-gray-400 text-sm mt-2">Comparaison avec Malt, Comet, Cr√®me de la Cr√®me</p>
    </div>

  </main>

  <!-- FOOTER -->
  <footer class="text-center py-8 text-xs text-gray-400 border-t border-gray-100">
    TauxJuste ¬∑ Calculateur de taux freelance IA ¬∑ Donn√©es march√© France 2024
  </footer>

  <script>
    let calculationData = null;
    let negotiationUnlocked = false;

    // Lock negotiate content on load
    document.getElementById('negotiate-content').classList.add('locked');

    async function calculateRate() {
      const competence = document.getElementById('competence').value;
      const experience = document.getElementById('experience').value;

      if (!competence || !experience) {
        showError('Veuillez renseigner votre comp√©tence principale et votre exp√©rience.');
        return;
      }

      setLoading(true);

      const payload = {
        competence,
        experience,
        localisation: document.getElementById('localisation').value,
        arrangement: document.getElementById('arrangement').value,
        specialisation: document.getElementById('specialisation').value,
        typeProjet: document.getElementById('typeProjet').value,
        complexite: document.getElementById('complexite').value,
        typeClient: document.getElementById('typeClient').value,
        duree: document.getElementById('duree').value,
        descriptionProjet: document.getElementById('descriptionProjet').value,
        qualitePortfolio: document.getElementById('qualitePortfolio').value,
        niveauDemande: document.getElementById('niveauDemande').value,
        valeurUnique: document.getElementById('valeurUnique').value,
      };

      try {
        const res = await fetch('/api/calculate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || 'Erreur inconnue');

        calculationData = { ...payload, tauxCible: data.tauxHoraire?.cible };
        displayResults(data);
      } catch (err) {
        showError(err.message);
      } finally {
        setLoading(false);
      }
    }

    function displayResults(data) {
      // Rates
      document.getElementById('r-bas-h').textContent = data.tauxHoraire?.bas + '‚Ç¨/h';
      document.getElementById('r-bas-tjm').textContent = data.tjm?.bas + '‚Ç¨';
      document.getElementById('r-cible-h').textContent = data.tauxHoraire?.cible + '‚Ç¨/h';
      document.getElementById('r-cible-tjm').textContent = data.tjm?.cible + '‚Ç¨';
      document.getElementById('r-premium-h').textContent = data.tauxHoraire?.premium + '‚Ç¨/h';
      document.getElementById('r-premium-tjm').textContent = data.tjm?.premium + '‚Ç¨';

      document.getElementById('r-justif').textContent = data.justificationCible || '';
      document.getElementById('r-quand-bas').textContent = data.quandUtiliserBas ? '‚Üí ' + data.quandUtiliserBas : '';
      document.getElementById('r-quand-premium').textContent = data.quandUtiliserPremium ? '‚Üí ' + data.quandUtiliserPremium : '';

      document.getElementById('r-position').textContent = data.positionMarche || '';
      document.getElementById('r-resume').textContent = data.resumePositionnement || '';
      document.getElementById('r-projection').textContent = data.projectionMensuelle || '';

      // Alertes
      const alertes = data.alertes || [];
      document.getElementById('r-alertes').innerHTML = alertes.length
        ? alertes.map(a => `<li class="flex gap-2"><span class="text-amber-500 mt-0.5">‚ö†</span><span>${a}</span></li>`).join('')
        : '<li class="text-gray-400">Aucune alerte particuli√®re.</li>';

      // Conseils
      const conseils = data.conseils || [];
      document.getElementById('r-conseils').innerHTML = conseils.length
        ? conseils.map(c => `<li class="flex gap-2"><span class="text-green-500 mt-0.5">‚Üí</span><span>${c}</span></li>`).join('')
        : '<li class="text-gray-400">Continuez comme √ßa !</li>';

      // Show results
      document.getElementById('form-section').classList.add('hidden');
      document.getElementById('results-section').classList.remove('hidden');
    }

    async function unlockNegotiation() {
      if (negotiationUnlocked) return;
      if (!calculationData) return;

      document.getElementById('premium-gate').innerHTML = '<span class="text-sm text-gray-400 pulse">G√©n√©ration en cours...</span>';

      try {
        const res = await fetch('/api/negotiate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(calculationData)
        });
        const data = await res.json();
        if (!res.ok) throw new Error(data.error);

        document.getElementById('n-email').textContent = data.scriptEmail || '‚Äî';
        document.getElementById('n-call').textContent = data.scriptCall || '‚Äî';
        document.getElementById('n-tropcher').textContent = data.reponseTropCher || '‚Äî';
        document.getElementById('n-remise').textContent = data.reponseRemise || '‚Äî';

        const points = data.pointsForts || [];
        document.getElementById('n-points').innerHTML = points
          .map(p => `<li class="flex gap-2 text-sm"><span class="text-green-500">‚úì</span><span>${p}</span></li>`)
          .join('');

        const erreurs = data.erreursCourantes || [];
        document.getElementById('n-erreurs').innerHTML = erreurs
          .map(e => `<li class="flex gap-2 text-sm"><span class="text-red-400">‚úï</span><span>${e}</span></li>`)
          .join('');

        document.getElementById('negotiate-content').classList.remove('locked');
        document.getElementById('premium-gate').classList.add('hidden');
        document.getElementById('premium-unlocked').classList.remove('hidden');
        negotiationUnlocked = true;

      } catch (err) {
        document.getElementById('premium-gate').innerHTML = `
          <span class="text-red-500 text-sm">${err.message}</span>
          <button onclick="unlockNegotiation()" class="bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-5 rounded-xl text-sm transition-colors ml-2">R√©essayer</button>
        `;
      }
    }

    function copyText(id) {
      const text = document.getElementById(id).textContent;
      navigator.clipboard.writeText(text).then(() => {
        const btn = event.target;
        btn.textContent = '‚úì Copi√© !';
        setTimeout(() => btn.textContent = 'Copier', 2000);
      });
    }

    function resetForm() {
      document.getElementById('results-section').classList.add('hidden');
      document.getElementById('form-section').classList.remove('hidden');
      negotiationUnlocked = false;
      document.getElementById('negotiate-content').classList.add('locked');
      document.getElementById('premium-gate').classList.remove('hidden');
      document.getElementById('premium-gate').innerHTML = `
        <span class="badge bg-amber-100 text-amber-700">üîí Premium</span>
        <button onclick="unlockNegotiation()" class="bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-5 rounded-xl text-sm transition-colors">
          D√©bloquer ‚Äî 3‚Ç¨
        </button>
      `;
      document.getElementById('premium-unlocked').classList.add('hidden');
    }

    function setLoading(state) {
      document.getElementById('loading-section').classList.toggle('hidden', !state);
      document.getElementById('form-section').classList.toggle('hidden', state);
      document.getElementById('error-msg').classList.add('hidden');
    }

    function showError(msg) {
      const el = document.getElementById('error-msg');
      el.textContent = '‚ùå ' + msg;
      el.classList.remove('hidden');
    }
  </script>
</body>
</html>
